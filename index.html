<!DOCTYPE html>
<meta charset="utf-8" />
<html>
  <head>
    <title>Pari passu - SOCIAL</title>

    <!-- CSS -->
    <link rel="icon" href="css/img/favicon.ico" />
    <link rel="stylesheet" href="css/page.css" />
    <link rel="stylesheet" href="css/paripassu.css" />

    <!-- Firebase -->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
	https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.1/firebase-auth.js"></script>

    <!-- External libs -->
    <script src="js/vendor/uuidv4.min.js"></script>
    <script src="js/vendor/aframe.min.js"></script>
    <script src="js/vendor/simplex-noise.js"></script>
    <script src="js/vendor/uuidv4.min.js"></script>
    <script src="js/vendor/vue.js"></script>
    <script src="js/vendor/mods-eng-basic.js"></script>
    <script src="js/vendor/tracery.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <!-- Utilities -->
    <script src="js/utilities.js"></script>
    <script src="js/vector-nonextended.js"></script>
    <script src="js/three-utils.js"></script>
    <script src="js/liveobject.js"></script>

    <script src="js/test-body.js"></script>

    <!-- YOUR CODE GOES IN THESE TWO -->
    <script src="js/custom.js"></script>
    <script src="js/v-customobjects.js"></script>

    <script src="js/v-body.js"></script>
    <script src="js/v-interaction.js"></script>
    <script src="js/v-scene.js"></script>

    <script src="js/room.js"></script>
    <script src="js/app.js"></script>

    <script type="module">
      // Import the functions you need from the SDKs you need
      console.log("CONNECTING TO FIREBASE");
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // It's ok for this to be public! Its visible in any web page
      const firebaseConfig = {
        // apiKey: "AIzaSyDZO5KrCfUsyg3-H25kUAZ_Z6aDv8KZAHA",
        // authDomain: "paripassu-e9c1b.firebaseapp.com",
        // databaseURL: "https://paripassu-e9c1b-default-rtdb.firebaseio.com",
        // projectId: "paripassu-e9c1b",
        // storageBucket: "paripassu-e9c1b.appspot.com",
        // messagingSenderId: "395560885213",
        // appId: "1:395560885213:web:3844e290560d34f46b7434"
        apiKey: "AIzaSyC-GpnxvYTHzBZ0e-7gLkciO1BK64wIy2E",
        authDomain: "arvr-final.firebaseapp.com",
        projectId: "arvr-final",
        storageBucket: "arvr-final.appspot.com",
        messagingSenderId: "472390262424",
        appId: "1:472390262424:web:c40fe2a650084d6f1f7aed",
        measurementId: "G-70ZLPQ8HR2",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      console.log("FIREBASE INIT");

      // Subscribing to auth changes
      firebase.auth().onAuthStateChanged((user) => {
        console.log("FIREBASE AUTH");

        if (user) {
          // User is signed in, see docs for a list of available properties
          // https://firebase.google.com/docs/reference/js/firebase.User
          var uid = user.uid;
          room.onAuth(uid, firebase.database());

          // ...
        } else {
          // User is signed out
          // ...
          console.warn("disconnect?");
          room.disconnectFromFirebase({});
        }
      });

      // Attempting authenticate anonymously
      console.log("FIREBASE SIGNIN...");
      firebase
        .auth()
        .signInAnonymously()
        .then(() => {
          console.log("...Firebase auth: Signed in anonynmously");
        })
        .catch((error) => {
          var errorCode = error.code;
          var errorMessage = error.message;
          // ...
          console.log(error);
        });
    </script>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
